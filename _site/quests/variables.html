<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Variables</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>
    <div id="page" class="page">
        <div id="site-header" role="banner">
    <div class="header-wrapper">
        <div class"region region-header">
            <div id="block-boxes-test" class="block block-boxes block-boxes simple logo block-odd">
                <div class="content">
                    <a href="/">
                        <img src="/assets/Puppet-Labs-Logo.png">
                    </a>
                </div>
            </div>
            <div id="block-menu_block-2" class="block block-menu-block header-primary-menu block-even">
                <div class="content">
                    <div class="menu-block-wrapper menu-block-2 menu-name-main-menu parent-mlid-0 menu-level-1">
                        <ul class="menu">
                            <li>
                                <a href="/">
                                    Quests
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    Progress
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    Cheat-Sheet
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    About
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    Resources
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

        <div id="main" clas="clearfix" role-"main">
        <aside id="sidebar-first" class="column sidebar first" role="complementary">
    <div id="sidebar-first-inner" class="inner">
        <div class="content">
            <div class="menu-block-wrapper menu-block-7 menu-name-main-menu parent-mlid-0 meni-level-2">
                <ul class="menu">
                    <li>
                        <a href="/quests/welcome.html">Welcome</a>
                    </li>
                    <li>
                        <a href="/quests/resources.html">Resources</a>
                    </li>
                    <li>
                        <a href="/quests/manifest_quest.html">Manifests</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</aside>


            <div id="content" class="clearfix" role="main">

                <h1>Variables and Variability</h1>

<blockquote>
<p>The green reed which bends in the wind is stronger than the mighty oak which breaks in a storm.</p>

<p>--Confuscius</p>
</blockquote>

<p>To start this quest enter the following command:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    quest --start variables
</code></pre></div>
<a id="variables"><h2>Variables</h2></a>

<p>What you have learned so far about manifests gives you the means to achieve a great deal. However, you need not travel far down your destined path of Puppet mastery before manifests like the ones you have written thus far will seem stiff and brittle; you will need something more supple, able to shift to meet changing conditions as you travel the roads of Elvium and beyond.</p>

<p>You’ve almost definitely used variables before in some other programming or scripting language, but <code>$variables</code> always start with a dollar sign and you assign them with the <code>=</code> operator. You can use variables as the value for any resource attribute, or as the title of a resource.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">$longthing = "Really long SSH key"

file {'authorized_keys':
  path    =&gt; '/root/.ssh/authorized_keys',
  content =&gt; $longthing,
}
</code></pre></div>
<div class="lvm-inline-aside">
<h3>What about the `$::variable` </h3>
<p>
People who write manifests to share with the public often adopt the habit of always using the $::variable notation when referring to facts. The double-colon prefix specifies that a given variable should be found at top scope. This isn’t actually necessary, since variable lookup will always reach top scope anyway.
</p>
</div>

<p>Lets make our manifests more adaptable by using variables.</p>

<h3>Tasks</h3>

<ol>
<li><p>To see an example of a variable doing its duty, first navigate to your workshop directory and create a new manifest called <code>fickle.pp</code></p></li>
<li><p>Enter the following to name and assign a variable:</p></li>
</ol>

<div class="highlight"><pre><code class="ruby"><span class="vg">$variable_name</span> <span class="o">=</span> <span class="s2">"variable value!</span><span class="se">\n</span><span class="s2">"</span>
</code></pre></div>
<div class="highlight"><pre><code class="text language-text" data-lang="text">Note the `$` symbol at the beginning of the var
</code></pre></div>
<a id="facts"><h2>Facts</h2></a>

<blockquote>
<p>Get your facts first, then distort them as you please.</p>

<p>--Mark Twain</p>
</blockquote>

<p>Puppet has a bunch of built-in, pre-assigned variables that you can use. Remember the Puppet tool <code>facter</code> when you first started? Just a quick refresher, <code>facter</code> discovers system information, normalizes it into a set of variables, and then passes them off to Puppet. Puppet’s compiler accesses those facts when it’s reading a manifest.</p>

<p>Remember running <code>facter ipaddress</code>? Puppet told you your IP address without you having to do anything. What if I wanted to turn <code>facter ipaddress</code> into a variable? You guessed it. It would look like this <code>${ipaddress}</code></p>

<p>How does this make our manifests more flexible? If I entered the following variables in a manifest:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    file {'motd':
      ensure  =&gt; file,
      path    =&gt; '/etc/motd',
      mode    =&gt; 0644,
      content =&gt; "This Learning Puppet VM's IP address is ${ipaddress}. It is running ${operatingsystem} ${operatingsystemrelease} and Puppet ${puppetversion}.

    Web console login:
      URL: https://${ipaddress_eth0}
      User: puppet@example.com
      Password: learningpuppet
    ",
    }
</code></pre></div>
<p>and then applied the manifest, this is what would be returned: </p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    file {'motd':
      ensure  =&gt; file,
      path    =&gt; '/etc/motd',
      mode    =&gt; 0644,
      content =&gt; This Learning Puppet VM's IP address is 172.16.52.135. It is running CentOS 5.7 and Puppet 3.0.1.

    Web console login:
      URL: https://172.16.52.135
      User: puppet@example.com
      Password: learningpuppet
    }
</code></pre></div>
<p>It's as simple as that without hardly doing anything on your end. Feeling confident? Lets combine our knowledge of variables and facts in our manifest</p>

<h3>Tasks</h3>

<ol>
<li>
</ol>

<p>Our manifests are becoming more flexible, with pretty much no real work on our part.</p>


            </div>
        <div id="site-footer">
    <div class="footer-top">
    </div>
</div>

        </div>
    </div>
    </body>
</html>
